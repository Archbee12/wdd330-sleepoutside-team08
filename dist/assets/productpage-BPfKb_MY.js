import{l as c,g as d,s as i,u as a,a as s,i as n,b as u}from"./CartCount-B4q7_aba.js";import{E as p}from"./ExternalServices-OHBWtN4X.js";c();class l{constructor(r,t){this.productId=r,this.product={},this.dataSource=t}async init(){this.product=await this.dataSource.findProductById(this.productId),this.renderProductDetails(),document.getElementById("addToCart").addEventListener("click",this.addProductToCart.bind(this))}addProductToCart(r){let t=d("so-cart")||[];const e=t.find(o=>o.Id===this.product.Id);e?e.quantity=(e.quantity||1)+1:(this.product.quantity=1,t.push(this.product)),i("so-cart",t),a()}renderProductDetails(){var o;const{isDiscounted:r}=s(this.product);if(!this.product||!this.product.Brand||!this.product.Brand.Name)return;document.querySelector("h2").textContent=this.product.Brand.Name,document.querySelector("h3").textContent=this.product.NameWithoutBrand;const t=document.getElementById("productImage");t.src=this.product.Images.PrimaryMedium,t.alt=this.product.NameWithoutBrand;const e=document.querySelector("#productPrice");r?e.innerHTML=`
        <span class="final-price">$${this.product.FinalPrice.toFixed(2)}</span>
        <span class="original-price">$${this.product.SuggestedRetailPrice.toFixed(2)}</span>
      `:e.textContent=`$${(o=this.product)==null?void 0:o.FinalPrice.toFixed(2)}`,document.querySelector("#productColor").textContent=this.product.Colors[0].ColorName,document.querySelector("#productDesc").innerHTML=this.product.DescriptionHtmlSimple,document.querySelector("#addToCart").dataset.id=this.product.Id}}c().then(()=>{n()});const h=new p,m=u("product"),g=new l(m,h);g.init();
